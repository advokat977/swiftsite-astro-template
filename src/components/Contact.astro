<section id="contact" class="contact section">
  <div class="container">
    <h2>Contact us</h2>
    <p>Tell us about your site and which plan you want.</p>

    <form class="panel" action="/api/contact" method="POST" novalidate onsubmit="return validateContactForm(event)">
      <div class="grid" style="margin-top:10px">
        <div class="form-field">
          <label for="name">Name</label>
          <input id="name" name="name" class="input" placeholder="Your name" required />
          <small class="help" data-help-for="name"></small>
        </div>

        <div class="form-field">
          <label for="email">Email</label>
          <input id="email" name="email" class="input" inputmode="email" placeholder="you@email.com" required />
          <small class="help" data-help-for="email"></small>
        </div>

        <div class="form-field form-row-span">
          <label for="message">Message</label>
          <textarea id="message" name="message" class="textarea" placeholder="What do you need?" required></textarea>
          <small class="help" data-help-for="message"></small>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-primary" type="submit">Send message</button>
      </div>

      <p class="help">No public email. Messages are processed server-side to avoid spam.</p>
    </form>
  </div>
</section>

<style>
.panel{
  background:#fff;border:1px solid var(--border);border-radius:var(--radius-lg);
  padding:18px;box-shadow:var(--shadow-sm);margin-top:12px;
}
.input.error,.textarea.error{border-color:#d92d20;box-shadow:0 0 0 3px rgba(217,45,32,.12)}
</style>

<script is:inline>
  function validateContactForm(e){
    const form = e.target;
    const name = form.querySelector('#name');
    const email = form.querySelector('#email');
    const message = form.querySelector('#message');
    const help = (id, text='') => form.querySelector(`[data-help-for="${id}"]`).textContent = text;

    let ok = true;

    // name
    if(!name.value.trim()){ name.classList.add('error'); help('name','Please enter your name.'); ok = false; }
    else { name.classList.remove('error'); help('name'); }

    // email (very light regex)
    const re=/^\S+@\S+\.\S+$/;
    if(!re.test(email.value.trim())){ email.classList.add('error'); help('email','Enter a valid email.'); ok = false; }
    else { email.classList.remove('error'); help('email'); }

    // message
    if(!message.value.trim()){ message.classList.add('error'); help('message','Tell us what you need.'); ok = false; }
    else { message.classList.remove('error'); help('message'); }

    if(!ok){ e.preventDefault(); }
    return ok;
  }
</script>
